import { type TaroStatic } from '@tarojs/taro';
import { type EnterMessage, CreateChatData } from '@coze/api';
import { MiniChatError } from "../../../../utils";
import { type ChatMessage, ISendMessage, SendMessageEvent, type RawMessage, type SendMessageEventData, IChatService, ChatInfo } from "../../../../types";
import { I18n } from "../../../../i18n";
export interface SendMessageOptions {
    conversationId: string;
    botId: string;
    chatService: IChatService;
    chatInfo?: ChatInfo;
    userId: string;
    connectorId: string;
    sectionId?: string;
    i18n: I18n;
}
export declare abstract class RawSendMessage implements ISendMessage {
    protected botId: string;
    protected userId: string;
    protected conversationId: string;
    protected sectionId?: string;
    private timeoutId?;
    protected chatId: string;
    protected connectorId: string;
    protected isAbort: boolean;
    protected chatService: IChatService;
    protected event: InstanceType<TaroStatic['Events']>;
    protected messageSended: ChatMessage;
    protected messageList: ChatMessage[];
    protected chatInfo?: ChatInfo;
    protected i18n: I18n;
    constructor({ conversationId, botId, chatService, userId, connectorId, sectionId, chatInfo, i18n, }: SendMessageOptions);
    abstract sendRawMessage(_rawMessage: RawMessage, _historyMessages?: EnterMessage[]): Promise<unknown>;
    sendMessage(_message: EnterMessage, _historyMessages?: EnterMessage[]): void;
    createAnswerTextMessage(message: string): ChatMessage;
    on(eventName: SendMessageEvent, callback: (args: SendMessageEventData) => void): void;
    off(eventName: SendMessageEvent, callback: (args: SendMessageEventData) => void): void;
    protected emit(eventName: SendMessageEvent, data: SendMessageEventData): void;
    close(data?: SendMessageEventData): boolean;
    break(): void;
    protected sendStartMessage(message: Partial<ChatMessage | EnterMessage>): void;
    private packMessage;
    protected sendBreakEvent(): void;
    protected sendProcessEvent(): void;
    protected sendRequireActionEvent(event: CreateChatData): void;
    protected sendCompleteEvent(): void;
    protected sendErrorEvent(error?: MiniChatError): void;
    protected _checkTimeout(timeout?: number): void;
    protected _clearTimeout(): void;
}
