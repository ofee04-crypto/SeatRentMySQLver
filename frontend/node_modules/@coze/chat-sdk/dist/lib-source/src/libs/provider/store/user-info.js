import { useMemo } from 'react';
import { create } from 'zustand';
import { logger, nanoid } from "../../utils";
import { useUpdateEffect } from "../../hooks";
import { useChatPropsContext } from '../context';
const createUserInfoStore = ({ user }) => {
    const defaultInfo = {
        id: (user === null || user === void 0 ? void 0 : user.id) || nanoid(),
    };
    return create()(set => ({
        info: Object.assign(Object.assign({}, defaultInfo), user),
        setUserInfo: (info) => {
            set({
                info: Object.assign(Object.assign({}, defaultInfo), (info || {})),
            });
        },
    }));
};
export const useCreateUserInfoStore = () => {
    const chatProps = useChatPropsContext();
    const userInfoStore = useMemo(() => createUserInfoStore({ user: chatProps === null || chatProps === void 0 ? void 0 : chatProps.user }), []);
    useUpdateEffect(() => {
        userInfoStore.getState().setUserInfo(chatProps.user);
        logger.debug('useCreateUserInfoStore in userUpdateEffect', chatProps.user);
    }, [chatProps]);
    return userInfoStore;
};
//# sourceMappingURL=user-info.js.map