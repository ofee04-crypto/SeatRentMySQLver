import { jsx as _jsx } from "react/jsx-runtime";
import { useState } from 'react';
import cls from 'classnames';
import { Image } from '@tarojs/components';
import { logger } from "../../../utils";
import { useUpdateEffect } from "../../../hooks";
import styles from './index.module.less';
export const CImage = props => {
    const [url, setUrl] = useState(props.src);
    useUpdateEffect(() => {
        setUrl(props.src);
    }, [props.src]);
    return (_jsx(Image, Object.assign({ onError: () => {
            logger.error('CImage onError', props.src);
            setUrl('');
        } }, props, { src: url, className: cls(props.className, {
            [styles['image-error']]: !url,
        }) })));
};
//# sourceMappingURL=index.js.map