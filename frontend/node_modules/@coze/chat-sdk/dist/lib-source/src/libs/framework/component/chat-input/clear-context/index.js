import { jsx as _jsx } from "react/jsx-runtime";
import { useMemo } from 'react';
import { DisableContainer } from "../../../../ui-kit/atomic/disable-container";
import { SvgConversation, IconButton } from "../../../../ui-kit";
import { useClearContext } from "../../../../services";
import { useChatStatusStore, useConversationStore } from "../../../../provider";
export const ClearContext = ({ type = 'circle-btn', svgTheme }) => {
    const { clearContext } = useClearContext();
    const { clearContext: clearContextDisableState } = useChatStatusStore(store => store.disableState);
    const { sectionId, chatMessageGroups } = useConversationStore(store => ({
        sectionId: store.sectionId,
        chatMessageGroups: store.chatMessageGroups,
    }));
    const isCanUser = useMemo(() => {
        var _a, _b;
        if (chatMessageGroups.length === 0) {
            return false;
        }
        if (sectionId &&
            ((_a = chatMessageGroups[chatMessageGroups.length - 1]) === null || _a === void 0 ? void 0 : _a.sectionId)) {
            if (sectionId !== ((_b = chatMessageGroups[chatMessageGroups.length - 1]) === null || _b === void 0 ? void 0 : _b.sectionId)) {
                return false;
            }
        }
        return true;
    }, [sectionId, chatMessageGroups]);
    return (_jsx(DisableContainer, Object.assign({ disabled: clearContextDisableState || !isCanUser }, { children: _jsx(IconButton, Object.assign({ onClick: clearContext, type: type, hoverTheme: svgTheme === 'light' ? 'none' : 'hover', bgColor: "bold" }, { children: _jsx(SvgConversation, { theme: svgTheme }) })) })));
};
//# sourceMappingURL=index.js.map