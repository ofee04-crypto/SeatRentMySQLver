import { TaroStatic } from '@tarojs/taro';
import { MiniChatError } from "..";
export declare const EventJsonDataType: unique symbol;
export interface IMessageEvent {
    event: string | symbol;
    data: unknown;
}
export type OpenHandler = (headers: Record<string, string>) => void;
export type CloseHandler = () => void;
export type MessageHandler = (data: IMessageEvent) => void;
export type ErrorHandler = (err: MiniChatError) => void;
export interface EventSourceProps {
    url: string;
    method?: 'GET' | 'POST' | 'PUT' | 'DELETE';
    header?: Record<string, unknown>;
    data?: string | Record<string, unknown> | Array<unknown>;
}
export declare enum MessageEvent {
    ERROR = "error",
    CLOSE = "close",
    OPEN = "open",
    MESSAGE = "message"
}
export declare class EventSourceBase {
    protected url: string;
    protected method: 'GET' | 'POST' | 'PUT' | 'DELETE';
    protected header: Record<string, unknown>;
    protected data?: string | Record<string, unknown> | Array<unknown>;
    protected isClosed: boolean;
    protected event: InstanceType<TaroStatic['Events']>;
    constructor({ url, method, header, data }: EventSourceProps);
    sendMessage(): void;
    protected _sendMessage(): void;
    close(): boolean;
    onError(onError: ErrorHandler): void;
    onClose(onClose: CloseHandler): void;
    onMessage(onMessage: MessageHandler): void;
    onOpen(onOpen: OpenHandler): void;
}
