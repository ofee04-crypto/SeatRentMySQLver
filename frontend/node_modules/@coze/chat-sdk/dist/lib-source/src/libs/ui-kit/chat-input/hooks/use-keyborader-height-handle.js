import { useEffect } from 'react';
import Taro, { useDidHide } from '@tarojs/taro';
import { isWeapp } from "../../../utils";
import { usePersistCallback } from "../../../hooks";
const isSupportKeyBoardHeight = isWeapp;
export const useKeyboardHeightHandle = (chatInputProps) => {
    const { onKeyBoardHeightChange } = chatInputProps;
    const onKeyBoardHeightChangeHandle = usePersistCallback((height) => {
        if (isSupportKeyBoardHeight) {
            onKeyBoardHeightChange === null || onKeyBoardHeightChange === void 0 ? void 0 : onKeyBoardHeightChange(height);
        }
    });
    useDidHide(() => {
        // 隐藏到后台的时候，默认键盘会收起，设置为0
        onKeyBoardHeightChangeHandle === null || onKeyBoardHeightChangeHandle === void 0 ? void 0 : onKeyBoardHeightChangeHandle(0);
    });
    useEffect(() => {
        var _a;
        if (isSupportKeyBoardHeight) {
            (_a = Taro === null || Taro === void 0 ? void 0 : Taro.onKeyboardHeightChange) === null || _a === void 0 ? void 0 : _a.call(Taro, res => {
                if (res.height === 0) {
                    onKeyBoardHeightChangeHandle === null || onKeyBoardHeightChangeHandle === void 0 ? void 0 : onKeyBoardHeightChangeHandle(0);
                    return;
                }
                onKeyBoardHeightChangeHandle === null || onKeyBoardHeightChangeHandle === void 0 ? void 0 : onKeyBoardHeightChangeHandle(res.height);
            });
        }
    }, []);
    return {
        onKeyBoardHeightChange: onKeyBoardHeightChangeHandle,
    };
};
//# sourceMappingURL=use-keyborader-height-handle.js.map