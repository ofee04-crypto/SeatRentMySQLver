import { jsx as _jsx } from "react/jsx-runtime";
import { useCallback, useEffect, useMemo, useState } from 'react';
import { Modal } from "../../../ui-kit/atomic/modal";
import { UIEventType } from "../../../types";
import { useUiEventStore } from "../../../provider/context/chat-store-context";
let modalId = 1000;
export const ChatModal = () => {
    const [event, setEvent] = useState();
    const key = useMemo(() => `modal_${modalId++}`, [event]);
    const uiEvent = useUiEventStore(store => store.event);
    useEffect(() => {
        uiEvent.on(UIEventType.ChatModalShow, (e) => {
            setEvent(e);
        });
    }, [uiEvent]);
    const hideModal = useCallback(() => {
        setEvent(undefined);
    }, []);
    if (!event || !event.renderModal) {
        return null;
    }
    // event修改的时候，会重新渲染，所以需要key
    return (_jsx(Modal, Object.assign({ onHide: hideModal }, { children: event.renderModal(hideModal) }), key));
};
//# sourceMappingURL=index.js.map