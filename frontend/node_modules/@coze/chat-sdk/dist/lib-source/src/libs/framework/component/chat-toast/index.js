import { jsx as _jsx } from "react/jsx-runtime";
import { useEffect, useState } from 'react';
import { View } from '@tarojs/components';
import { Toast } from "../../../ui-kit";
import { UIEventType } from "../../../types";
import { useUiEventStore } from "../../../provider/context/chat-store-context";
import styles from './index.module.less';
export const ChatToast = () => {
    const [event, setEvent] = useState();
    const uiEvent = useUiEventStore(store => store.event);
    useEffect(() => {
        uiEvent.on(UIEventType.ChatToastShow, (e) => {
            setEvent(e);
        });
    }, [uiEvent]);
    useEffect(() => {
        const timeout = setTimeout(() => {
            setEvent(undefined);
        }, Math.max(Math.min(10000, (event === null || event === void 0 ? void 0 : event.duration) || 6000), 3000));
        return () => {
            clearTimeout(timeout);
        };
    }, [event]);
    if (!event || !event.content) {
        return null;
    }
    return (_jsx(View, Object.assign({ className: styles['chat-toast'] }, { children: _jsx(Toast, Object.assign({ className: styles.container, icon: event.icon, isNeedClose: false }, { children: event.content })) })));
};
//# sourceMappingURL=index.js.map